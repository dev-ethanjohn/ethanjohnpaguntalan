---
// src/pages/home/blogs/[...slug].astro
import { getCollection, render, type CollectionEntry } from "astro:content";
import BlogPostLayout from "../../../layouts/BlogPostLayout.astro";
import { slugify } from "../../../utils/utils";

export async function getStaticPaths() {
  const blogPosts = await getCollection("blog");
  return blogPosts.map((post: CollectionEntry<"blog">) => {
    const slug = slugify(post.data.title);
    return {
      params: { slug },
      props: post,
    };
  });
}

const post = Astro.props as CollectionEntry<"blog">;
const { Content } = await render(post);
---

<BlogPostLayout data={post.data}>
  <Content />
</BlogPostLayout>
